# ä¿å§†çº§æ•™ç¨‹ï¼šä»é›¶å¼€å§‹å¼€å‘ä½ çš„ç¬¬ä¸€ä¸ª VS Code æ’ä»¶

> ğŸ‘¨â€ğŸ’» **ç›®æ ‡è¯»è€…**ï¼šå¦‚æœä½ å¯¹ VS Code æ’ä»¶å¼€å‘æ„Ÿå…´è¶£ï¼Œä½†å®Œå…¨é›¶åŸºç¡€ï¼Œè¿™ç¯‡æ•™ç¨‹å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚
>
> â± **é¢„è®¡è€—æ—¶**ï¼š30 åˆ†é’Ÿ
>
> ğŸ¯ **æœ€ç»ˆæˆæœ**ï¼šä¸€ä¸ªèƒ½å¼¹å‡º Hello World æç¤ºæ¡†ï¼Œä¸”èƒ½éšç¼–è¾‘å™¨è‡ªåŠ¨å¯åŠ¨çš„å®Œæ•´æ’ä»¶ã€‚

---

## ğŸš€ 1. ä¸ºä»€ä¹ˆå¼€å‘ VS Code æ’ä»¶ï¼Ÿ

VS Code æ˜¯ç›®å‰æœ€æµè¡Œçš„ç¼–è¾‘å™¨ä¹‹ä¸€ï¼Œå®ƒçš„å¼ºå¤§ä¹‹å¤„åœ¨äº**ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ**ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œä½ ä¸€å®šç”¨è¿‡å„ç§æ’ä»¶æ¥æé«˜æ•ˆç‡ã€‚

**ä½†ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼š**
*   "å¦‚æœæœ‰ä¸ªå·¥å…·èƒ½è‡ªåŠ¨å¸®æˆ‘ç”Ÿæˆè¿™æ®µé‡å¤ä»£ç å°±å¥½äº†..."
*   "è¦æ˜¯èƒ½æŠŠè¿™ä¸ªå†…éƒ¨å·¥å…·é›†æˆåˆ°ç¼–è¾‘å™¨é‡Œè¯¥å¤šæ–¹ä¾¿..."

å…¶å®ï¼Œå¼€å‘ä¸€ä¸ª VS Code æ’ä»¶æ¯”ä½ æƒ³è±¡çš„è¦ç®€å•å¾—å¤šï¼ä»Šå¤©æˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªæœ€ç®€å•çš„ Hello World ä¾‹å­ï¼Œå¸¦ä½ èµ°å®Œ**å¼€å‘ -> è°ƒè¯• -> æ‰“åŒ…**çš„å…¨æµç¨‹ã€‚

### âš¡ï¸ ç‰¹åˆ«ç¯‡ï¼šCursorã€Trae ä¹Ÿèƒ½ç”¨å—ï¼Ÿ

ä½ å¯èƒ½æ­£åœ¨ä½¿ç”¨ **Cursor**ã€**Trae** æˆ–å…¶ä»–æ–°å…´çš„ AI ç¼–è¾‘å™¨ã€‚ä½ å¯èƒ½ä¼šé—®ï¼šâ€œæˆ‘å­¦çš„è¿™ä¸ªæ˜¯ VS Code æ’ä»¶å¼€å‘ï¼Œèƒ½åœ¨è¿™äº›ç¼–è¾‘å™¨é‡Œç”¨å—ï¼Ÿâ€

**ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼è€Œä¸”éå¸¸ä¸æ»‘ã€‚**

1.  **åŒæºæ¶æ„**ï¼šCursor å’Œ Trae ç­‰ç¼–è¾‘å™¨ï¼Œåº•å±‚å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯åŸºäº VS Code çš„å¼€æºæ ¸å¿ƒ (Code OSS) æ„å»ºçš„ã€‚è¿™æ„å‘³ç€å®ƒä»¬å¤©ç”Ÿå°±æ‹¥æœ‰ç›¸åŒçš„â€œåŸºå› â€ã€‚
2.  **ä¸€æ¬¡å¼€å‘ï¼Œåˆ°å¤„è¿è¡Œ**ï¼šç»å¤§å¤šæ•°æ ‡å‡†çš„ VS Code API åœ¨è¿™äº›ç¼–è¾‘å™¨ä¸­æ˜¯å®Œå…¨é€šç”¨çš„ã€‚ä½ ç¼–å†™çš„ VS Code æ’ä»¶ï¼Œ99% çš„æƒ…å†µä¸‹å¯ä»¥ç›´æ¥å®‰è£…åœ¨ Cursor æˆ– Trae ä¸­ï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç ã€‚
3.  **å¦‚ä½•å®‰è£…**ï¼š
    *   **å¼€å‘æ—¶**ï¼šä½ å¯ä»¥ç›´æ¥ç”¨ Cursor æ‰“å¼€æ’ä»¶é¡¹ç›®ï¼ŒæŒ‰ F5 è°ƒè¯•ï¼Œä½“éªŒå’Œ VS Code ä¸€æ¨¡ä¸€æ ·ï¼ˆç”šè‡³æ›´å¥½ï¼Œå› ä¸ºæœ‰ AI è¾…åŠ©ï¼‰ã€‚
    *   **ä½¿ç”¨æ—¶**ï¼šå¦‚æœä½ æ‰“åŒ…å‡ºäº† `.vsix` æ–‡ä»¶ï¼Œç›´æ¥å°†å…¶æ‹–å…¥ Cursor/Trae çš„æ‰©å±•ä¾§è¾¹æ å³å¯å®‰è£…ã€‚å¾ˆå¤šç¼–è¾‘å™¨ç”šè‡³ç›´æ¥å…±ç”¨äº† VS Code çš„æ’ä»¶å¸‚åœºã€‚

æ‰€ä»¥ï¼Œ**å­¦ä¼šäº† VS Code æ’ä»¶å¼€å‘ï¼Œä½ å°±è‡ªåŠ¨è§£é”äº†ä¸ºæ‰€æœ‰ç±» VS Code ç¼–è¾‘å™¨å¼€å‘æ’ä»¶çš„æŠ€èƒ½ï¼** è¿™æ˜¯ä¸€ç¬”æ€§ä»·æ¯”æé«˜çš„æŠ€æœ¯æŠ•èµ„ã€‚

---

## ğŸ›  2. ç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»å®‰è£…äº†ä»¥ä¸‹å·¥å…·ï¼š

1.  **Node.js** (å»ºè®® v18 LTS æˆ– v20 LTS ç‰ˆæœ¬ï¼Œä¸ç°ä»£ VS Code ç¯å¢ƒä¸€è‡´)
    *   æ£€æŸ¥æ–¹æ³•ï¼šåœ¨ç»ˆç«¯è¿è¡Œ `node -v`
2.  **Git** (ç”¨äºç‰ˆæœ¬æ§åˆ¶ï¼Œå¯é€‰)
3.  **ç¼–è¾‘å™¨**ï¼šå½“ç„¶æ˜¯ VS Code æˆ–è€… Cursorï¼

---

## ğŸ— 3. Step 1: æ­å»ºé¡¹ç›®éª¨æ¶

è™½ç„¶å®˜æ–¹æä¾›äº† `yo code` è„šæ‰‹æ¶ï¼Œä½†ä¸ºäº†è®©ä½ ç†è§£æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼Œæˆ‘ä»¬é‡‡ç”¨**æ‰‹åŠ¨æ­å»º**çš„æ–¹å¼ã€‚

è¯·åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ `vscode-plugin-demo`ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š

```text
vscode-plugin-demo/
â”œâ”€â”€ package.json        // æ ¸å¿ƒé…ç½®æ–‡ä»¶
â”œâ”€â”€ tsconfig.json       // TypeScript é…ç½®
â”œâ”€â”€ .gitignore          // Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ src/
â”‚   â””â”€â”€ extension.ts    // æ’ä»¶ä»£ç å…¥å£
â””â”€â”€ .vscode/
    â”œâ”€â”€ launch.json     // è°ƒè¯•é…ç½®
    â””â”€â”€ tasks.json      // æ„å»ºä»»åŠ¡
```

### 3.1 æ ¸å¿ƒé…ç½® `package.json`

è¿™æ˜¯æ’ä»¶çš„â€œèº«ä»½è¯â€ã€‚æŠŠä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°ä½ çš„ `package.json` ä¸­ï¼š

```json
{
  "name": "vscode-plugin-demo",
  "displayName": "VS Code Plugin Demo",
  "description": "ä¸€ä¸ªç”¨äºå…¥é—¨å­¦ä¹ çš„ VS Code æ’ä»¶ Demo",
  "version": "0.0.1",
  "publisher": "yourname",  // å‘å¸ƒæ—¶éœ€è¦ä¿®æ”¹ä¸ºä½ çš„å‘å¸ƒè€…ID
  "engines": {
    "vscode": "^1.85.0"     // ä¾èµ–çš„ VS Code æœ€ä½ç‰ˆæœ¬
  },
  "categories": ["Other"],
  
  // ğŸŸ¢ å…³é”®ç‚¹ 1ï¼šæ¿€æ´»äº‹ä»¶
  // VS Code 1.74+ æ”¯æŒâ€œéšå¼æ¿€æ´»â€ï¼ˆåªè¦æ³¨å†Œäº†å‘½ä»¤å°±ä¼šè‡ªåŠ¨æ¿€æ´»ï¼‰ã€‚
  // è¿™é‡Œä¿ç•™ "onStartupFinished" æ˜¯ä¸ºäº†æ¼”ç¤ºâ€œç¼–è¾‘å™¨å¯åŠ¨åç«‹å³è‡ªåŠ¨æ‰§è¡Œâ€çš„æ•ˆæœã€‚
  "activationEvents": [
    "onStartupFinished"
  ],
  
  "main": "./out/extension.js",
  
  // ğŸŸ¢ å…³é”®ç‚¹ 2ï¼šè´¡çŒ®ç‚¹
  // å‘Šè¯‰ VS Code è¿™ä¸ªæ’ä»¶æä¾›äº†ä»€ä¹ˆåŠŸèƒ½
  "contributes": {
    "commands": [
      {
        "command": "demo.helloWorld",  // å‘½ä»¤ IDï¼Œä»£ç ä¸­ä¼šç”¨åˆ°
        "title": "Demo: Hello World"   // å‘½ä»¤é¢æ¿ä¸­æ˜¾ç¤ºçš„æ ‡é¢˜
      }
    ]
  },
  
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./"
  },
  "devDependencies": {
    "@types/vscode": "^1.85.0",
    "@types/node": "^18.14.6",
    "typescript": "^5.3.3"
  }
}
```

### 3.2 ç¼–è¯‘é…ç½® `tsconfig.json`

å‘Šè¯‰ TypeScript æ€ä¹ˆç¼–è¯‘ä»£ç ï¼š

```json
{
  "compilerOptions": {
    "module": "commonjs",
    "target": "es2020",    // æ¨è es2020+ï¼Œäº§ç‰©æ›´ç®€æ´
    "outDir": "out",
    "lib": ["es6"],
    "sourceMap": true,
    "rootDir": "src",
    "strict": true
  },
  "exclude": ["node_modules"]
}
```

### 3.3 æ‰“åŒ…ç˜¦èº« `.vscodeignore` (å…³é”®ï¼)

**è¿™æ˜¯ä¸€ä¸ªæ–°æ‰‹æœ€å®¹æ˜“å¿½ç•¥çš„æ–‡ä»¶**ã€‚å¦‚æœä¸é…ç½®å®ƒï¼Œä½ çš„æºç ã€Git è®°å½•ã€æµ‹è¯•æ–‡ä»¶å…¨éƒ½ä¼šè¢«æ‰“åŒ…è¿›æ’ä»¶å®‰è£…åŒ…é‡Œï¼Œå¯¼è‡´ä½“ç§¯å·¨å¤§ä¸”æ³„éœ²æºç ã€‚

åˆ›å»º `.vscodeignore` æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š

```text
.vscode/**
.vscode-test/**
src/**
.gitignore
tsconfig.json
webpack.config.js
node_modules/**
out/test/**
**/*.map
```

*(æ³¨æ„ï¼š`node_modules` å¿…é¡»å¿½ç•¥ï¼Œå› ä¸ºæ‰“åŒ…å·¥å…·ä¼šè‡ªåŠ¨åˆ†æä¾èµ–å¹¶å°†éœ€è¦çš„ä»£ç æ‰“åŒ…è¿›æœ€ç»ˆæ–‡ä»¶ï¼Œä¸éœ€è¦æŠŠæ•´ä¸ªæ–‡ä»¶å¤¹å¸¦ä¸Š)*

---

## ğŸ’» 4. Step 2: ç¼–å†™æ ¸å¿ƒä»£ç 

ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥å†™æ’ä»¶çš„é€»è¾‘ã€‚åœ¨ `src/extension.ts` ä¸­å†™å…¥ï¼š

```typescript
// å¼•å…¥ VS Code æ¨¡å—
import * as vscode from 'vscode';

// ğŸ”´ activate å‡½æ•°ï¼šæ’ä»¶çš„å…¥å£
// å½“æ»¡è¶³ package.json ä¸­ activationEvents çš„æ¡ä»¶æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°
export function activate(context: vscode.ExtensionContext) {

    // 1. æ‰“å°æ—¥å¿—ï¼ˆè°ƒè¯•æ§åˆ¶å°å¯è§ï¼‰
    console.log(`[${new Date().toLocaleTimeString()}] æ’ä»¶å·²æ¿€æ´»ï¼`);

    // 2. æ³¨å†Œå‘½ä»¤
    // 'demo.helloWorld' å¿…é¡»ä¸ package.json ä¸­çš„ command å­—æ®µä¸€è‡´
    let disposable = vscode.commands.registerCommand('demo.helloWorld', () => {
        
        // 3. æ‰§è¡Œé€»è¾‘ï¼šå¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†
        vscode.window.showInformationMessage('Hello World from VS Code Plugin Demo!');
    });

    // 4. æ³¨å†Œèµ„æºé‡Šæ”¾
    // å°†å‘½ä»¤æ”¾å…¥ subscriptions ä¸­ï¼Œç¡®ä¿æ’ä»¶å¸è½½æ—¶è‡ªåŠ¨æ¸…ç†èµ„æº
    context.subscriptions.push(disposable);
}

// deactivate å‡½æ•°ï¼šæ’ä»¶åœç”¨æ—¶è°ƒç”¨ï¼ˆé€šå¸¸ç•™ç©ºï¼‰
export function deactivate() {}
```

---

## ğŸ 5. Step 3: ä¸€é”®è°ƒè¯• (F5)

ä¸ºäº†èƒ½åƒå¼€å‘æ™®é€š Web é¡¹ç›®ä¸€æ ·æŒ‰ F5 è°ƒè¯•ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® `.vscode` ç›®å½•ä¸‹çš„ä¸¤ä¸ªæ–‡ä»¶ã€‚

### 5.1 `launch.json` (å¯åŠ¨é…ç½®)

```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Run Extension",
            "type": "extensionHost",
            "request": "launch",
            "args": ["--extensionDevelopmentPath=${workspaceFolder}"],
            "outFiles": ["${workspaceFolder}/out/**/*.js"],
            "preLaunchTask": "${defaultBuildTask}" // å¯åŠ¨å‰å…ˆè¿è¡Œæ„å»ºä»»åŠ¡
        }
    ]
}
```

### 5.2 `tasks.json` (æ„å»ºä»»åŠ¡)

è¿™ä¸ªé…ç½®ä¼šåœ¨è°ƒè¯•å‰è‡ªåŠ¨è¿è¡Œ `npm run watch`ï¼Œå®ç°ä»£ç ä¿®æ”¹åå®æ—¶ç¼–è¯‘ã€‚

```json
{
	"version": "2.0.0",
	"tasks": [
		{
			"type": "npm",
			"script": "watch",
			"problemMatcher": "$tsc-watch",
			"isBackground": true,
			"presentation": { "reveal": "never" },
			"group": { "kind": "build", "isDefault": true },
			"label": "npm: watch"
		}
	]
}
```

---

## â–¶ï¸ 6. Step 4: è¿è¡Œèµ·æ¥ï¼

1.  **å®‰è£…ä¾èµ–**ï¼š
    åœ¨ç»ˆç«¯è¿è¡Œ `npm install`ã€‚

2.  **å¯åŠ¨è°ƒè¯•**ï¼š
    æŒ‰ä¸‹ **`F5`** é”®ã€‚æ­¤æ—¶ä¼šè‡ªåŠ¨ç¼–è¯‘ä»£ç ï¼Œå¹¶æ‰“å¼€ä¸€ä¸ªæ–°çš„ VS Code çª—å£ï¼ˆç§°ä¸ºâ€œæ‰©å±•å¼€å‘å®¿ä¸»â€ï¼‰ã€‚

3.  **éªŒè¯æ•ˆæœ 1 (è‡ªåŠ¨æ¿€æ´»)**ï¼š
    åœ¨æ–°çª—å£åº•éƒ¨çš„ "Debug Console" (è°ƒè¯•æ§åˆ¶å°) ä¸­ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°æˆ‘ä»¬å†™çš„æ—¥å¿—ï¼š
    `[10:30:00] æ’ä»¶å·²æ¿€æ´»ï¼`
    *è¯´æ˜ï¼šè¿™æ˜¯å› ä¸ºæˆ‘ä»¬é…ç½®äº† `onStartupFinished`ã€‚*

4.  **éªŒè¯æ•ˆæœ 2 (æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤)**ï¼š
    *   åœ¨æ–°çª—å£ä¸­æŒ‰ä¸‹ `Cmd+Shift+P` (Mac) æˆ– `Ctrl+Shift+P` (Win)ã€‚
    *   è¾“å…¥ `Demo: Hello World` å¹¶å›è½¦ã€‚
    *   ğŸ‰ **Bingo!** å³ä¸‹è§’å¼¹å‡ºäº†æç¤ºæ¡†ã€‚

---

## ğŸ“¦ 7. Step 5: æ‰“åŒ…ä¸å‘å¸ƒ

å¼€å‘å®Œæˆåï¼Œæ€ä¹ˆç»™åˆ«äººç”¨å‘¢ï¼Ÿ

### 7.1 æ‰“åŒ…ä¸º .vsix æ–‡ä»¶ (ç§æœ‰åˆ†äº«)

å¦‚æœä½ åªæ˜¯æƒ³å‘ç»™åŒäº‹ï¼Œæˆ–è€…è‡ªå·±ç”¨ï¼š

1.  æ‰“åŒ…å‘½ä»¤ï¼ˆæ¨èä½¿ç”¨ npxï¼Œæ— éœ€å…¨å±€å®‰è£…ï¼‰ï¼š
    ```bash
    npx @vscode/vsce package
    ```
2.  è¿™ä¼šç”Ÿæˆä¸€ä¸ª `.vsix` æ–‡ä»¶ã€‚ä½ å¯ä»¥ç›´æ¥æŠŠå®ƒæ‹–åˆ° VS Code çš„æ‰©å±•æ é‡Œè¿›è¡Œå®‰è£…ã€‚

### 7.2 å‘å¸ƒåˆ°æ’ä»¶å¸‚åœº (å…¬å¼€)

å¦‚æœä½ æƒ³è®©å…¨ä¸–ç•Œéƒ½èƒ½æœåˆ°ä½ çš„æ’ä»¶ï¼š

1.  å» [VS Code Marketplace](https://marketplace.visualstudio.com/manage) æ³¨å†Œè´¦å·ã€‚
2.  è·å– Personal Access Token (PAT)ã€‚
3.  è¿è¡Œ `npx @vscode/vsce login <publisher-id>`ã€‚
4.  è¿è¡Œ `npx @vscode/vsce publish`ã€‚

*(è¯¦ç»†å‘å¸ƒæµç¨‹å»ºè®®å‚è€ƒå®˜æ–¹æ–‡æ¡£)*

---

## ğŸ“š 8. æ›´å¤šå­¦ä¹ èµ„æº

æ­å–œä½ ï¼ä½ å·²ç»æŒæ¡äº† VS Code æ’ä»¶å¼€å‘çš„æ ¸å¿ƒæµç¨‹ã€‚

æƒ³è¦æ·±å…¥å­¦ä¹ ï¼Œæ¨èä»¥ä¸‹èµ„æºï¼š
*   **[VS Code API å®˜æ–¹æ–‡æ¡£](https://code.visualstudio.com/api)**ï¼šæœ€æƒå¨çš„æŒ‡å—ã€‚
*   **[Extension Samples](https://github.com/microsoft/vscode-extension-samples)**ï¼šå¾®è½¯å®˜æ–¹æä¾›çš„å‡ åä¸ªç¤ºä¾‹ä»£ç ï¼Œæƒ³å®ç°ä»€ä¹ˆåŠŸèƒ½å…ˆå»è¿™é‡Œæ‰¾æ‰¾ã€‚
*   **[VS Code æ’ä»¶å¼€å‘æŒ‡å— (ä¸­æ–‡)](https://liiked.github.io/VS-Code-Extension-Doc-ZH/)**ï¼šç¤¾åŒºç»´æŠ¤çš„ä¸­æ–‡æ–‡æ¡£ã€‚

ç¥ä½ åœ¨æ’ä»¶å¼€å‘çš„é“è·¯ä¸Šè¶Šèµ°è¶Šè¿œï¼ğŸš€
